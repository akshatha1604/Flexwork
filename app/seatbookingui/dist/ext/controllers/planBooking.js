sap.ui.define(["sap/ui/model/odata/v4/ODataModel","sap/m/Token","sap/ui/model/json/JSONModel"],function(e,o,t){"use strict";function a(){var e=[];var o=`employeeID_ID eq '${sap.ushell.Container.getService("UserInfo").getId()}'`;$.get({url:"/seat-booking/TeamEmployeeMaster",headers:{"x-csrf-token":"fetch"},data:{$filter:o},success:function(o,t,a){e=o},async:false});if(e.value){if(e.value[0]){return e.value[0]}}}function r(e){var o;var t=`ID eq '${e}'`;$.get({url:"/seat-booking/Users",data:{$filter:t},success:function(e){o=e},async:false});if(o.value[0])return o.value[0]}function n(e,o){var t=[];var a=`teamID eq '${e}'`;var r=`/seat-booking/EmployeeBookingStatus(ip_teamID='${e}',ip_date=${o})/Set`;$.get({url:r,success:function(e,o,a){t=e},async:false});if(t.value){return t.value}}return{openPlanBookingDialog:function(e){sap.ui.core.BusyIndicator.show(0);var o=a();var t={radiobutton:[{type:"Individual Booking"},{type:"Group Booking(*visible to Manager/lead role)"}],Property:{index:0,MyBooking:true,OnBehalfBooking:false,GroupBooking:false,GroupBookingDate:""},userDetails:{employeeID_ID:o.employeeID_ID,role_roleCode:o.role_roleCode,teamID:o.teamID},Seats:[{Date:"12.06.2021",SeatNo:"BLR04-2F-001",monitors:"2",others:"power,ext",available:"Full Day",Seat:"11"},{Date:"12.06.2021",SeatNo:"BLR04-2F-004",monitors:"2",others:"power,ext",available:"1st Half Day",Seat:"11"},{Date:"12.06.2021",SeatNo:"BLR04-2F-008",monitors:"1",others:"power,ext",available:"1st Half Day",Seat:"11"},{Date:"12.06.2021",SeatNo:"BLR04-2F-001",monitors:"2",others:"power,ext",available:"Full Day",Seat:"9"},{Date:"13.06.2021",SeatNo:"BLR04-2F-001",monitors:"1",others:"power,ext",available:"Full Day",Seat:"9"}],empList:[]};var r=this._controller.getView();var n=new sap.ui.model.json.JSONModel(t);r.setModel(n,"modelData");if(!this._oDialogonPlanBooking){this._oDialogonPlanBooking=sap.ui.xmlfragment(r.getId(),"seatbookingui.ext.fragments.planBooking",this);r.addDependent(this._oDialogonPlanBooking)}this._oDialogonPlanBooking.open();sap.ui.core.BusyIndicator.hide()},onSelectChange:function(e){alert("search called")},PlanBookingCancelPress:function(){this._oDialogonPlanBooking.close()},BookingTypeSelection:function(e){var o=this._controller.getView().getModel("modelData");var t=o.getProperty("/Property/index");var a=o.getProperty("/userDetails");if(a.role_roleCode!=="03"){if(t===0){o.setProperty("/Property/MyBooking",true);o.setProperty("/Property/OnBehalfBooking",false);o.setProperty("/Property/GroupBooking",false)}else if(t===1){o.setProperty("/Property/MyBooking",false);o.setProperty("/Property/OnBehalfBooking",false);o.setProperty("/Property/GroupBooking",true);if(o.getProperty("/empList").length===0){var r=n(a.teamID,o.getProperty("/Property/GroupBookingDate"))}}}else{o.setProperty("/Property/MyBooking",true);o.setProperty("/Property/OnBehalfBooking",false);o.setProperty("/Property/GroupBooking",false);o.setProperty("/Property/index",0);sap.m.MessageToast.show("This feature is not available yet for members")}}}});